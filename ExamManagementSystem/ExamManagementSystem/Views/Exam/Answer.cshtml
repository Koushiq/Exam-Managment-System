@model IEnumerable<ExamManagementSystem.Models.DataAccess.Question>

@{
    ViewBag.Title = (ViewBag.Course + " " + ViewBag.Exm.ExamName);
    var sid = ViewBag.Exm.SectionId;
}

<h2>@(ViewBag.Course + " " + ViewBag.Exm.ExamName)</h2>

<form method="POST" enctype="multipart/form-data">
    <table>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    <h3>@item.Statement: </h3>
                </td>
            </tr>
            <tr>
                <td>
                    @if (item.Type == "Descriptive")
                    {
                        <input type="file" name=@item.Id />
                    }
                    else if (item.Type == "Text")
                    {
                        <textarea name=item.Id rows=5 cols=100></textarea>
                    }
                    else if (item.Type == "MCQ")
                    {
                        <div id="mcq">
                            @foreach (var i in item.Options)
                            {
                                <input type="radio" class="radio" name="@i.QuestionId" id="@i.Id" value="@i.OptionId" /> @i.OptionText
                            }
                        </div>
                    }
                    else
                    {
                        <div id="mcq">
                            @foreach (var i in item.Options)
                            {
                                <input type="Checkbox" name="@i.QuestionId" id="check" value="@i.Id" /> @i.OptionText
                            }
                        </div>
                    }
                </td>
            </tr>
        }
    </table>
    <br />
    <!--<input type="submit" name="Submit" id="submit" value="Submit"/>-->
</form>

<br />
@Html.ActionLink("Back","NewExams","Student",new {sid = sid},null)

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $(".radio").on("click",function () {
            $.ajax(
            {
                type: 'POST',
                url: "/Exam/Answer",
                data: {
                    questionId: $(this).attr("id"),
                    id: $(this).val()
                },
                success: function (data) {
                    console.log(data);
                },
                error: (error) => {
                    console.log(JSON.stringify(error));
                }
            });
        });
    });
</script>